"""
블로그 글 생성을 위한 프롬프트 템플릿
"""

# ============================================================
# 질문형 콘텐츠 프롬프트 (2단계 구조)
# ============================================================

# Step 1: 뉴스 흐름 분석 + 주제 3개 제안
TOPIC_SUGGESTION_PROMPT = """
아래는 Google News RSS에서 수집한 최근 기사 제목들이다.

## 기사 제목 목록
{news_titles}

## 지시사항

### Step 1: 핵심 흐름 파악
위 기사들에서 공통적으로 드러나는 핵심 흐름을 1~2문장으로 요약하라.
그리고 이 흐름을 '일반 독자가 느낄 상황' 관점으로 재해석하라.

### Step 2: 블로그 주제 3개 제안
당신은 전문 티스토리 블로거입니다.
위에서 도출한 흐름을 바탕으로, 티스토리 블로그 독자가 실제로 검색할 법한 **질문형 주제 3개**를 만들어라.

조건:
- 뉴스나 기사 느낌이 나면 안 된다
- '왜', '어떻게', '지금 써도 되나', '뭐가 다른 거야' 같은 표현을 활용한다.
- 1개는 초보자 관점, 1개는 직장인 관점으로 포함한다.
- 3~6개월 유효한 주제여야 한다 (단기 뉴스 X)

카테고리별 예시:
- AI: "요즘 AI 모델이 너무 자주 바뀌는 이유는 뭘까?", "회사에서 써도 안전한 생성형 AI는 어떤 기준으로 골라야 할까?"
- 건강: "아침 공복에 물 마시면 정말 좋은 걸까?", "하루 만보 걷기, 진짜 효과 있는 거야?"
- 경제: "요즘 적금 금리가 이렇게 된 이유가 뭘까?", "ETF 투자 지금 시작해도 괜찮을까?"
- 생활: "미니멀 라이프, 정말 돈이 절약될까?", "1인 가구 가성비 가전 고르는 기준이 뭘까?"

## 출력 형식 (JSON)
```json
{{
    "trend_summary": "핵심 흐름 요약 (1~2문장)",
    "reader_perspective": "일반 독자 관점 재해석 (1~2문장)",
    "suggested_topics": [
        {{
            "topic": "질문형 주제 1",
            "target": "초보자",
            "reason": "이 주제를 선택한 이유"
        }},
        {{
            "topic": "질문형 주제 2",
            "target": "직장인",
            "reason": "이 주제를 선택한 이유"
        }},
        {{
            "topic": "질문형 주제 3",
            "target": "일반",
            "reason": "이 주제를 선택한 이유"
        }}
    ]
}}
```

JSON만 출력하세요.
"""

# Step 2: 선택된 주제로 블로그 글 작성
QUESTION_BASED_ARTICLE_PROMPT = """
## 작성할 주제
{selected_topic}

## 참고 뉴스 흐름
{trend_summary}

## 글 작성 규칙

### 금지 사항
1. '발표했다', '공개했다' 금지 → 상황 중심으로, 사실은 맥락으로 표현
2. 숫자와 성능은 체감 효과로 바꾸기 (정말 필요할 때만 수치 사용)
3. 기사형 도입부 금지 ("최근 ~가 발표되었다" 같은 표현 X)
4. 전문가 관점 금지 → 일반인 관점으로 작성
5. "오늘의 ~ 소식 정리" 스타일 금지

### 필수 사항
1. 결론에서 방향 제시하기
   - 지금 상황 요약
   - 지금 당장 할 수 있는 선택 1~2개
   - "이런 사람은 이렇게 해라"로 마무리
2. 1,500~2,500자 분량
3. HTML 형식으로 작성
4. 자연스럽고 친근한 문체 (~하다, ~였다, ~이다 - 존댓말 금지)

### 글 구조
- 본론(핵심) 부분은 아래 구조를 참고하되, 완벽히 똑같을 필요는 없다.

```
# 도입
<h2>요즘 ○○ 때문에 헷갈린다는 이야기</h2>
<p>공감할 수 있는 상황 묘사로 시작</p>

# 배경
<h2> 왜 이런 일이 생겼는지</h2>
<p>뉴스 흐름 요약 (기사 직접 언급 X, 맥락으로 설명)</p>

# 핵심 1
<h2>사람들이 가장 궁금해할 포인트 - 질문형 소제목</h2>
<p>상세 설명</p>

# 핵심 2
<h2>두 번째 궁금증 - 질문형 소제목</h2>
<p>상세 설명</p>

# 핵심 3
<h2>세 번째 궁금증 - 질문형 소제목</h2>
<p>상세 설명</p>

#선택 가이드
<h2>지금 뭘 선택해야 할까?</h2>
<p>초보자 / 직장인 / 실사용자 기준으로 정리</p>

#결론
<h2>지금은 이렇게 하면 된다</h2>
<p>핵심 요약 + 구체적인 다음 행동 제안</p>
```

### 제목 규칙
- 질문형 또는 호기심 유발형
- 25~35자
- 카테고리별 예시:
  - AI: "ChatGPT vs Claude, 지금 뭘 써야 할까?"
  - 건강: "아침 공복 운동, 정말 살이 더 빠질까?"
  - 경제: "적금 vs ETF, 2024년엔 뭐가 유리할까?"
  - 생활: "1인 가구 냉장고, 어떤 사이즈가 딱일까?"

### 태그 규칙
- 검색량 높은 키워드 5~7개
- 질문에서 파생된 키워드 포함

## 출력 형식 (JSON)
```json
{{
    "title": "제목",
    "meta_description": "150자 이내 메타 설명",
    "content": "<h2>...</h2><p>...</p>...",
    "tags": ["태그1", "태그2", "태그3", "태그4", "태그5"],
    "category": "{category_name}"
}}
```

JSON만 출력하세요.
"""


# ============================================================
# 통합 프롬프트 (1회 API 호출)
# ============================================================

UNIFIED_ARTICLE_PROMPT = """
아래는 Google News RSS에서 수집한 최근 기사 제목들이다.

## 기사 제목 목록
{news_titles}

## 지시사항

당신은 전문 티스토리 블로거입니다. 아래 3단계를 순서대로 수행하세요.

### Step 1: 핵심 흐름 파악
위 기사들에서 공통적으로 드러나는 핵심 흐름을 1~2문장으로 요약하라.
그리고 이 흐름을 '일반 독자가 느낄 상황' 관점으로 재해석하라.

### Step 2: 블로그 주제 선정
위에서 도출한 흐름을 바탕으로, 티스토리 블로그 독자가 실제로 검색할 법한 **질문형 주제 1개**를 선정하라.

조건:
- 뉴스나 기사 느낌이 나면 안 된다
- '왜', '어떻게', '지금 써도 되나', '뭐가 다른 거야' 같은 표현을 활용한다
- 3~6개월 유효한 주제여야 한다 (단기 뉴스 X)

카테고리별 예시:
- AI: "요즘 AI 모델이 너무 자주 바뀌는 이유는 뭘까?", "회사에서 써도 안전한 생성형 AI는 어떤 기준으로 골라야 할까?"
- 건강: "아침 공복에 물 마시면 정말 좋은 걸까?", "하루 만보 걷기, 진짜 효과 있는 거야?"
- 경제: "요즘 적금 금리가 이렇게 된 이유가 뭘까?", "ETF 투자 지금 시작해도 괜찮을까?"
- 생활: "미니멀 라이프, 정말 돈이 절약될까?", "1인 가구 가성비 가전 고르는 기준이 뭘까?"

### Step 3: 블로그 글 작성
선정한 주제로 아래 규칙에 따라 블로그 글을 작성하라.

#### 금지 사항
1. '발표했다', '공개했다' 금지 → 상황 중심으로, 사실은 맥락으로 표현
2. 숫자와 성능은 체감 효과로 바꾸기 (정말 필요할 때만 수치 사용)
3. 기사형 도입부 금지 ("최근 ~가 발표되었다" 같은 표현 X)
4. 전문가 관점 금지 → 일반인 관점으로 작성
5. "오늘의 ~ 소식 정리" 스타일 금지

#### 필수 사항
1. 결론에서 방향 제시하기
   - 지금 상황 요약
   - 지금 당장 할 수 있는 선택 1~2개
   - "이런 사람은 이렇게 해라"로 마무리
2. 1,500~2,500자 분량
3. HTML 형식으로 작성
4. 자연스럽고 친근한 문체 (~하다, ~였다)

#### 글 구조
```
<h2>[도입] 요즘 ○○ 때문에 헷갈린다는 이야기</h2>
<p>공감할 수 있는 상황 묘사로 시작</p>

<h2>[배경] 왜 이런 일이 생겼는지</h2>
<p>뉴스 흐름 요약 (기사 직접 언급 X, 맥락으로 설명)</p>

<h2>[핵심 1] 사람들이 가장 궁금해할 포인트 - 질문형 소제목</h2>
<p>상세 설명</p>

<h2>[핵심 2] 두 번째 궁금증 - 질문형 소제목</h2>
<p>상세 설명</p>

<h2>[핵심 3] 세 번째 궁금증 - 질문형 소제목</h2>
<p>상세 설명</p>

<h2>[선택 가이드] 지금 뭘 선택해야 할까?</h2>
<p>초보자 / 직장인 / 실사용자 기준으로 정리</p>

<h2>[결론] 지금은 이렇게 하면 된다</h2>
<p>핵심 요약 + 구체적인 다음 행동 제안</p>
```

#### 제목 규칙
- 질문형 또는 호기심 유발형
- 25~35자
- 카테고리별 예시:
  - AI: "ChatGPT vs Claude, 지금 뭘 써야 할까?"
  - 건강: "아침 공복 운동, 정말 살이 더 빠질까?"
  - 경제: "적금 vs ETF, 2024년엔 뭐가 유리할까?"
  - 생활: "1인 가구 냉장고, 어떤 사이즈가 딱일까?"

#### 태그 규칙
- 검색량 높은 키워드 5~7개
- 질문에서 파생된 키워드 포함

## 출력 형식 (JSON)
```json
{{
    "trend_summary": "핵심 흐름 요약 (1~2문장)",
    "reader_perspective": "일반 독자 관점 재해석 (1~2문장)",
    "selected_topic": "선정된 질문형 주제",
    "title": "블로그 제목",
    "meta_description": "150자 이내 메타 설명",
    "content": "<h2>...</h2><p>...</p>...",
    "tags": ["태그1", "태그2", "태그3", "태그4", "태그5"],
    "category": "{category_name}"
}}
```

JSON만 출력하세요.
"""


# ============================================================
# 기존 프롬프트 (레거시)
# ============================================================

# 정보형 글 프롬프트 (AI/테크/경제 뉴스)
INFO_ARTICLE_PROMPT = """
당신은 AI 전문 블로거입니다. 아래 뉴스를 바탕으로 SEO에 최적화된 블로그 글을 작성하세요.

## 뉴스 정보
- 카테고리: {category_name}
- 메인 기사: {main_title}
- 메인 기사 링크: {main_link}
- 출처: {source}
- 관련 기사들:
{related_articles}

## 작성 규칙

### 1. 제목 (title)
- 호기심을 자극하는 제목 (숫자, 질문형, 이슈 키워드 포함)
- 30자 내외
- 예시: "ChatGPT 5.0 출시 임박? 달라지는 3가지", "애플 AI 전략의 숨겨진 의도"

### 2. 메타 설명 (meta_description)
- 150자 이내의 요약
- 핵심 키워드 포함

### 3. 본문 (content)
- **총 1,500~2,500자**
- HTML 형식으로 작성

#### 구조:
```
<h2>들어가며</h2>
<p>후킹 문장으로 시작. 독자의 관심을 끌 수 있는 질문이나 놀라운 사실로 시작</p>

<h2>[핵심 내용 1]</h2>
<p>상세 설명</p>

<h2>[핵심 내용 2]</h2>
<p>상세 설명</p>

<h2>[핵심 내용 3]</h2>
<p>상세 설명</p>

<h2>마치며</h2>
<p>요약 + 독자에게 생각해볼 질문 던지기</p>
```

### 4. 태그 (tags)
- 관련 키워드 5-7개
- 검색량 높은 키워드 우선

### 5. 작성 시 주의사항
- 구글 광고 수익을 위해 체류 시간을 늘릴 수 있는 흥미로운 내용 포함
- 기사의 문장 구조, 표현, 문단 구성, 비유, 어휘를 절대 재사용하지 말 것
- 직접 인용은 하지 말고, 객관적 사실(fact)만 추출해 재구성
- 기사에 없는 내용은 추론임을 명확히 할 것
- 독자의 이해를 돕는 설명과 개인 의견 및 전망 추가로 차별화
- 결과물은 완전히 새로운 블로그 글처럼 작성
- 오늘 ~ 소식 정리와 같은 스타일 지양
- 자연스러운 문체 (너무 딱딱하지 않게)
- 불릿 포인트, 굵은 글씨 등 가독성 고려
- 사실 검증이 중요한 글인 경우에만 글 마지막에 출처 링크를 포함 (형식: `<p class="source">출처: <a href="링크" target="_blank" rel="noopener">기사제목</a> (출처명)</p>`)

## 출력 형식 (JSON)
```json
{{
    "title": "제목",
    "meta_description": "메타 설명",
    "content": "<h2>...</h2><p>...</p>...",
    "tags": ["태그1", "태그2", "태그3", "태그4", "태그5"],
    "category": "{category_name}"
}}
```

JSON만 출력하세요. 다른 텍스트는 포함하지 마세요.
"""

# 체험형 글 프롬프트 (사용자 입력 기반)
EXPERIENCE_ARTICLE_PROMPT = """
당신은 일상의 경험을 공유하는 블로거입니다. 아래 메모를 바탕으로 블로그 글을 작성하세요.

## 사용자 메모
{user_memo}

## 카테고리
{category}

## 작성 규칙

### 1. 제목 (title)
- 경험을 담은 자연스러운 제목
- 지역명이나 제품명 포함 시 SEO에 유리
- 맛집 후기의 경우 제목은 "[지역명] 특징 10자 이내 - 매장명 후기" 형식 유지
- 예시: "[홍대] 가성비 좋은 카이센동 맛집 - 카이센동 우니도 신사본점 후기", "[을지로3가] 윤남노쉐프 세 번째 식당 - 디핀 을지로3가(점입가경) 방문기"

### 2. 메타 설명 (meta_description)
- 150자 이내

### 3. 본문 (content)
- **총 1,500~2,500자**
- HTML 형식
- 사진 들어갈 위치에 `[PHOTO_1]`, `[PHOTO_2]` 등 플레이스홀더 삽입

#### 구조:
```
<h2>방문 계기 / 구매 이유</h2>
<p>어떤 계기로 방문/구매하게 되었는지</p>
[PHOTO_1]

<h2>상세 리뷰</h2>
<p>자세한 경험 공유</p>
[PHOTO_2]

<h2>장단점</h2>
<p>솔직한 장단점</p>
[PHOTO_3]

<h2>총평</h2>
<p>추천 여부와 이유</p>
```

### 4. 태그 (tags)
- 지역명, 제품명, 관련 키워드 포함
- 5-7개

### 5. 주의사항
- 1인칭 시점으로 자연스러운 문체 (예시: ~했다, ~였다)
- 메모에 있는 핵심 경험은 반드시 포함
- 과장 없이 솔직한 톤
- 살짝 유머러스하게
- 사진 플레이스홀더는 적절한 위치에 3-5개 배치

## 출력 형식 (JSON)
```json
{{
    "title": "제목",
    "meta_description": "메타 설명",
    "content": "<h2>...</h2><p>...</p>[PHOTO_1]...",
    "tags": ["태그1", "태그2", "태그3"],
    "category": "{category}",
    "photo_count": 4
}}
```

JSON만 출력하세요.
"""
